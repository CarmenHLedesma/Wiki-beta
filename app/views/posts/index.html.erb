<%- model_class = Post -%>
<!-- añade el título a la url y el breadcrumb en el header -->
<% content_for :title, 'wiki-beta' %>
<% navigation_add model_class.model_name.human.pluralize.titleize, '' %>

<table class="table-responsive">
  <thead>
      <tr>
        <th><% model_class.human_attribute_name(:id) %></th>
        <th><%= model_class.human_attribute_name(:title) %></th>
        <th><%= model_class.human_attribute_name(:tag) %></th>
        <th><%= model_class.human_attribute_name(:text) %></th>
        <th><% model_class.human_attribute_name(:name) %></th>
        <th><%= model_class.human_attribute_name(:document)%></th>
        <th><% model_class.human_attribute_name(:created_at) %></th>
        <th><% t '.actions', :default => t("helpers.actions") %></th>
      </tr>
  </thead>
  <tbody>
  <% @posts.each do |post| %>
      <tr>
        <td><% link_to post.id, post_path(post) %></td>
        <td><%= post.title %></td>
        <td><%= post.tag_list %></td>
        <td>
          <% if strip_tags(post.text).length > 100 %>
              <%= strip_tags(post.text).slice(0,100)+ '...' %>
          <% else %>
              <%= strip_tags(post.text) %>
          <% end %>
        </td>
         <td><%= post.user.name %></td>
        <td><% if post.document_file_name != nil %>
            <button type="button" class="btn btn-default btn-xs">
              <%= image_tag("glyphicons-37-file.png", class: 'small-icon') %>
            </button></td>
            <% end %>
            <td><% l post.created_at %></td>
        <td>
          <% if post.parent_id == nil %>
            <%= link_to t('.show', :default => t("helpers.links.show")),
                post_path(post), :class => 'btn btn-default btn-xs' %>
          <% else %>
             <%= link_to t('.show', :default => t("helpers.links.show")),
                 show_child_post_path(post), :class => 'btn btn-default btn-xs' %>
          <% end %>

          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_post_path(post), :class => 'btn btn-default btn-xs' %>
          <%= link_to post_path(post), :method => :delete, :data => { :confirm => t('.confirm', :default => 'Are you sure?') } do %>
             <button type="button" class="btn btn-default btn-xs">
                <%= image_tag("glyphicons-17-bin.png", class: 'small-icon') %>
             </button>
          <% end %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_post_path,
            :class => 'btn btn-default btn new' %>

<!-- Añadimos código Javascript para nuestros select en index con select2 -->

<% content_for :js do %>
    <script type="text/javascript">
        $(document).ready(function() {
            prettyPrint();
            $('select#simple-example').select2();
        });
    </script>
<% end %>